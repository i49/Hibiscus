<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_74) on Mon Jan 02 11:35:17 JST 2017 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Overview (Hibiscus 0.2.0-SNAPSHOT API)</title>
<meta name="date" content="2017-01-02">
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<script type="text/javascript" src="script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Overview (Hibiscus 0.2.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li class="navBarCell1Rev">Overview</li>
<li>Package</li>
<li>Class</li>
<li>Use</li>
<li><a href="overview-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev</li>
<li>Next</li>
</ul>
<ul class="navList">
<li><a href="index.html?overview-summary.html" target="_top">Frames</a></li>
<li><a href="overview-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 class="title">Hibiscus 0.2.0-SNAPSHOT API</h1>
</div>
<div class="header">
<div class="subTitle">
<div class="block">Hibiscus is JSON validator that verifies JSON documents against your schema which can be written as Java code.</div>
</div>
<p>See: <a href="#overview.description">Description</a></p>
</div>
<div class="contentContainer">
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Packages table, listing packages, and an explanation">
<caption><span>Packages</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Package</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="com/github/i49/hibiscus/common/package-summary.html">com.github.i49.hibiscus.common</a></td>
<td class="colLast">
<div class="block">Provides common classes shared among all packages in this library.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="com/github/i49/hibiscus/facets/package-summary.html">com.github.i49.hibiscus.facets</a></td>
<td class="colLast">
<div class="block">Provides various kinds of <i>facets</i> that allow you to restrict the value spaces of built-in types 
 in schema for JSON.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="com/github/i49/hibiscus/formats/package-summary.html">com.github.i49.hibiscus.formats</a></td>
<td class="colLast">
<div class="block">Provides various kinds of <i>formats</i> that allow you to specify the known format for
 values of types declared in schema for JSON.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="com/github/i49/hibiscus/json/package-summary.html">com.github.i49.hibiscus.json</a></td>
<td class="colLast">
<div class="block">Provides helper classes to enhance Java API for JSON Processing (JSR 353),
 which are used only inside of this library.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="com/github/i49/hibiscus/problems/package-summary.html">com.github.i49.hibiscus.problems</a></td>
<td class="colLast">
<div class="block">Provides classes representing problems that will be detected by validation of JSON document.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="com/github/i49/hibiscus/schema/package-summary.html">com.github.i49.hibiscus.schema</a></td>
<td class="colLast">
<div class="block">Provides schema components such as schema, built-in types and object properties,
 which are used to define schemas for JSON document.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="com/github/i49/hibiscus/validation/package-summary.html">com.github.i49.hibiscus.validation</a></td>
<td class="colLast">
<div class="block">Provides a JSON validator and its supporting types.</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="contentContainer"><a name="overview.description">
<!--   -->
</a>
<div class="block"><p>Hibiscus is JSON validator that verifies JSON documents against your schema which can be written as Java code.</p>

<h2>1. Introduction</h2>
<h3>1.1 Schema example</h3>
<p>As first example we assume that you have JSON document below that you would like to validate in your application.</p>
<blockquote><pre><code>{
  "firstName": "Jason",
  "lastName": "Bourne",
  "age": 46,
  "hobbies": ["shooting", "recollection"]
}
</code></pre></blockquote>
<p>Supposing that the first two properties of the object are mandatory and others are optional. 
We can write the schema for this kind of document as Java code like following:</p>
<blockquote><pre><code>Schema schema = schema(
  object(
    required("firstName", string()),
    required("lastName", string()),
    optional("age", integer()),
    optional("hobbies", array(string()))
  )  
);
</code></pre></blockquote>

<h3>1.2. How to write your own JSON validator</h3>
<ol>
<li><p>Create a new class that extends <code>BasicJsonValidator</code> class.</p>
<pre><code>import com.github.i49.hibiscus.validation.BasicJsonValidator;

public class PersonValidator extends BasicJsonValidator {
}
</code></pre>
</li>
<li><p>Add <code>static import</code> statement which will make your schema building easier.</p>
<pre><code>import static com.github.i49.hibiscus.schema.SchemaComponents.*;
</code></pre>
</li>
<li><p>Define your schema as a class constant of your validator.</p>
<pre><code>import com.github.i49.hibiscus.validation.BasicJsonValidator;
import com.github.i49.hibiscus.schema.Schema;
import static com.github.i49.hibiscus.schema.SchemaComponents.*;

public class PersonValidator extends BasicJsonValidator {
  // Schema definition.
  private static final Schema schema = schema(
    object(
      required("firstName", string()),
      required("lastName", string()),
      optional("age", integer()),
      optional("hobbies", array(string()))
    )
  );  
}
</code></pre>
</li>
<li><p>Pass the schema to the constructor of superclass, and then your work is done.</p>
<pre><code>import com.github.i49.hibiscus.validation.BasicJsonValidator;
import com.github.i49.hibiscus.schema.Schema;
import static com.github.i49.hibiscus.schema.SchemaComponents.*;

public class PersonValidator extends BasicJsonValidator {
  // Schema definition.
  private static final Schema schema = schema(
    object(
      required("firstName", string()),
      required("lastName", string()),
      optional("age", integer()),
      optional("hobbies", array(string()))
    )
  );  

  public PersonValidator() {
    super(schema)
  }
}
</code></pre>
<p>The next section shows you how to use the validator you created.</p>
</li>
</ol>

<h3>1.3. How to validate JSON documents with your validator</h3>
<ol>
<li><p>Create an instance of your validator.</p>
<pre><code>PersonValidator validator = new PersonValidator();
</code></pre>
</li>
<li><p>Validate JSON document with the validator.</p>
<pre><code>// An object to retrieve validation result.
ValidationResult result = null;
try (Reader reader = new FileReader("person.json")) {
  // Reads and validates JSON document here.
  result = validator.validate(reader);
}
</code></pre>
</li>
<li><p>Process detected problems properly.</p>
<pre><code>for (Problem problem: result.getProblems()) {
  // Handles each problem here.
  // We just print text representation of the problem here.
  System.out.println(problem);
}
</code></pre>
<p>One of the nice features of Hibiscus is that it reports where these problems occurred, such as line and column numbers. 
This can be accomplished because the library do both loading and validating JSON document at the same time, 
not after completely loading it and building a tree of JSON values.</p>
</li>
<li><p>Make use of retrieved JSON value as you like in your application.</p>
<pre><code>JsonValue root = result.getValue();
</code></pre>
<p>Hibiscus returns JSON values defined in 
<a href="http://json-processing-spec.java.net/">Java API for JSON Processing (JSR-353, JSON-P)</a>. 
Please note that it returns JSON value even when the JSON document does not obey the given schema, 
as long as the document is <i>well-formed</i> and not broken as JSON.</p>
</li>
</ol>

<h2>2. Schema Basics</h2>
<h3>2.1. Schema</h3>

<p>The top level component of your schema is <code>Schema</code> which can be instantiated by calling
<code><a href="com/github/i49/hibiscus/schema/SchemaComponents.html#schema--">SchemaComponents.schema()</a></code>
class method.
</p>

<blockquote><pre><code>
import static com.github.i49.hibiscus.schema.SchemaComponents.*;
Schema s = schema(/* type declarations here. */);  
</code></pre></blockquote>

<p>The parameters of this method are types that allowed to be at the root of JSON documents. 
All types that are useful to write schema will be introduced in the next section.
</p>

<h3>2.2. Built-in Types</h3>

<p>This library offers following built-in types which can be used to define schemas for JSON.</p>

<table border="1" cellpadding="4" style="border-collapse: collapse;">
<caption>The list of built-in types</caption>
<tr>
<th>No.</th>
<th>Type Name</th>
<th>Creation Method</th>
<th>Interface</th>
<th>Description</th>
<th>Sample Values</th>
</tr>
<tr>
<td>1</td>
<td>array</td>
<td><code><a href="com/github/i49/hibiscus/schema/SchemaComponents.html#array--">SchemaComponents.array()</a></code></td>
<td><code><a href="com/github/i49/hibiscus/schema/ArrayType.html">ArrayType</a></code></td>
<td>JSON array</td>
<td><code>["milk", "bread", "eggs"]</code></td>
</tr>
<tr>
<td>2</td>
<td>bool</td>
<td><code><a href="com/github/i49/hibiscus/schema/SchemaComponents.html#bool--">SchemaComponents.bool()</a></code></td>
<td><code><a href="com/github/i49/hibiscus/schema/BooleanType.html">BooleanType</a></code></td>
<td>JSON boolean</td>
<td><code>true</code></td>
</tr>
<tr>
<td>3</td>
<td>integer</td>
<td><code><a href="com/github/i49/hibiscus/schema/SchemaComponents.html#integer--">SchemaComponents.integer()</a></code></td>
<td><code><a href="com/github/i49/hibiscus/schema/IntegerType.html">IntegerType</a></code></td>
<td>JSON number without a fractional part</td>
<td><code>42</code></td>
</tr>
<tr>
<td>4</td>
<td>number</td>
<td><code><a href="com/github/i49/hibiscus/schema/SchemaComponents.html#number--">SchemaComponents.number()</a></code></td>
<td><code><a href="com/github/i49/hibiscus/schema/NumberType.html">NumberType</a></code></td>
<td>JSON number</td>
<td><code>3.14</code></td>
</tr>
<tr>
<td>5</td>
<td>null</td>
<td><code><a href="com/github/i49/hibiscus/schema/SchemaComponents.html#nil--">SchemaComponents.nil()</a></code></td>
<td><code><a href="com/github/i49/hibiscus/schema/NullType.html">NullType</a></code></td>
<td>JSON null</td>
<td><code>null</code></td>
</tr>
<tr>
<td>6</td>
<td>object</td>
<td><code><a href="com/github/i49/hibiscus/schema/SchemaComponents.html#object--">SchemaComponents.object()</a></code></td>
<td><code><a href="com/github/i49/hibiscus/schema/ObjectType.html">ObjectType</a></code></td>
<td>JSON object</td>
<td><code>{"name": "John", "age": 33}</code></td>
</tr>
<tr>
<td>7</td>
<td>string</td>
<td><code><a href="com/github/i49/hibiscus/schema/SchemaComponents.html#string--">SchemaComponents.string()</a></code></td>
<td><code><a href="com/github/i49/hibiscus/schema/StringType.html">StringType</a></code></td>
<td>JSON string</td>
<td><code>"hello"</code></td>
</tr>
</table>

<p>
All methods that will create these built-in types are provided as
<code><a href="com/github/i49/hibiscus/schema/SchemaComponents.html">SchemaComponents</a></code> class methods.
</p>

<blockquote><pre><code>
import static com.github.i49.hibiscus.schema.SchemaComponents.*;
BooleanType b = bool();
IntegerType i = integer();
NumberType n = number();
NullType nil = nil();
StringType s = string();
</code></pre></blockquote></div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li class="navBarCell1Rev">Overview</li>
<li>Package</li>
<li>Class</li>
<li>Use</li>
<li><a href="overview-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev</li>
<li>Next</li>
</ul>
<ul class="navList">
<li><a href="index.html?overview-summary.html" target="_top">Frames</a></li>
<li><a href="overview-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2016&#x2013;2017. All rights reserved.</small></p>
</body>
</html>
